@model IEnumerable<TailorManagementApp.Models.Customer>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

                <div class="row">
                    <div class="col-lg-12">
                        <div class="card">
                            <div class="card-block">
                                @if (ViewBag.TheResult == true)
                                {
                                    <div class="alert alert-success">
                                        <strong>Success!</strong> Message has been sent to @ViewBag.Count Customer!
                                    </div>
                                }
                                else if(ViewBag.TheResult==false)
                                {
                            <div class="alert alert-danger">
                                <strong>Failed!</strong>Message has been sent to @ViewBag.Count Customer!
                            </div>
                                }

                                <div class="col-lg-12">
                                    <b><i class="ti-tag"></i> <span><b>Customer List</b></span></b>
                                    <a class="btn btn-success" style="margin-bottom:12px;float:right;" asp-action="Create"><i class="ti-plus"></i>Create New</a>
                                </div>
                                <br />
                                <hr />
                                <div class="dt-responsive table-responsive">
                                    @using (Html.BeginForm("CustomerSms", "Customers", FormMethod.Post))
                                    {
                                        <textarea name="msg" rows="5" cols="5" class="form-control"
                                                  placeholder="Type a Text you want to send"></textarea>
                                                  <br/>
                                                  <hr/>

                                        <button  value="Send" class="btn btn-dark" onclick="return confirm('Are you sure?')"><i class="ti-text"></i> Send SMS</button>
                                        <br /><br />
                                        <table class="table table-striped table-bordered nowrap" id="customerTable">

                                            <thead>
                                                <tr>
                                                    <th><input type="checkbox" id="checkBoxAll" class="custom-checkbox" /></th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Name)
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Phone)
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.Address)
                                                    </th>
                                                    <th>
                                                        @Html.DisplayNameFor(model => model.RegisterDate)
                                                    </th>
                                                    <th></th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                @foreach (var item in Model)
                                                {
                                                    <tr>
                                                        <td><input type="checkbox" name="ID" value="@item.CustomerID" class="custom-checkbox chkCheckBoxId" /></td>
                                                        <td>
                                                            <img src="@item.ImagePath"
                                                                 class="gallery"
                                                                 height="40" width="40"
                                                                 asp-append-version="true" />
                                                            @item.Name
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.Phone)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.Address)
                                                        </td>
                                                        <td>
                                                            @Html.DisplayFor(modelItem => item.RegisterDate)
                                                        </td>
                                                        <td>
                                                            <a asp-action="Edit" asp-route-id="@item.CustomerID"><i class="ti-pencil"></i></a>|
                                                            <a data-toggle="ajax-modal" id="delete" data-target="#customerModal" data-url="@Url.Action($"Details/{item.CustomerID}")"><i class="ti-list"></i></a> |
                                                            <a data-toggle="ajax-modal" id="delete" data-target="#customerModal" data-url="@Url.Action($"Delete/{item.CustomerID}")"><i class="ti-trash"></i></a>|
                                                           
                                                        </td>

                                                    </tr>
                                                }
                                            </tbody>
                                        </table>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
           <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.22/css/jquery.dataTables.css">

@section scripts{

    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.22/js/jquery.dataTables.js"></script>
    <script type="text/javascript" src="~/js/Popup.js"></script>
    <script src="~/js/NavActive.js"></script>
    <script>

        $(document).ready(function () {
            $('#customerTable').DataTable({
                "paging": true,
                "ordering": true,
                "info": true
            });
            $('#checkBoxAll').click(function () {  
                if ($(this).is(":checked")) {  
                    $(".chkCheckBoxId").prop("checked", true)  
                }  
                else {  
                    $(".chkCheckBoxId").prop("checked", false)  
                }  
            }); 
        });




    </script>

}
